#!/usr/node/bin/node

var fs = require('fs');
var workflow = require('../lib/util/workflow');


var jobUUID = process.argv[2];
if (!jobUUID) {
    console.error('Usage: wait-for-job [UUID]');
    process.exit(1);
}

var config = JSON.parse(fs.readFileSync(__dirname + '/../config.json'));
var opts = {
    url: config.wfapi.url,
    uuid: jobUUID
};

workflow.waitForJob(opts, function (err, res) {
    if (err) {
        return console.error(err.message);
    }
});
